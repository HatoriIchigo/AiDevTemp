# 開発ガイドライン

---

## 目次

[行動原則](#行動原則)
[プロジェクトの概要]()
[システム構成図]()
[機能一覧]()
[画面一覧]()
[技術スタック]()
[使用するコマンド]()
[ディレクトリ構成](#ディレクトリ構成)
[メインコード実装方針]()
[単体テストコード実装方針]()
[結合・統合テスト実装方針]()
[その他プロジェクトに関する必要事項]()
[注意事項]()
[参照ドキュメント](#参照ドキュメント)

---

## 行動原則

> 本文書の【MUST】【SHOULD】【MAY】は、RFC 2119に準拠します：
> - 【MUST GLOBAL】：MUSTの上位概念。プロジェクトごとの要求事項より優先される
> - 【MUST】: 絶対的要求事項。例外なく従う必要がある
> - 【SHOULD】: 強い推奨事項。特別な理由がない限り従う
> - 【MAY】: 任意事項。状況に応じて採用を判断

### 【MUST GLOBAL】基本理念

#### 応答原則
- 回答は**すべて日本語**、簡潔・明瞭を徹底
- 不明確な点は「不明」と素直に伝える
- agentが使用できる場合は常にagentを使用する

#### 曖昧な要求への対応

- **推測禁止**: 不明な点は必ず質問する
- **確認優先**: 「○○という理解で正しいですか？」と確認
- **最小実行**: 明示的に要求されたことのみ実行

#### 禁止行為チェックリスト
- [ ] 要求されていない機能の追加
- [ ] 勝手なリファクタリング  
- [ ] 推測に基づく実装
- [ ] 「ついでに」の作業
- [ ] 親切心からの拡大解釈

#### 実行前の自問自答

1. これは明示的に要求されたか？ → NO なら実行しない
2. 解釈に推測が含まれているか？ → YES なら質問する
3. 「ついでに」やろうとしていないか？ → YES なら止める

#### 品質哲学
- **読み手に優しいコード**: 次のエンジニアがすぐ理解できる
- **品質最優先**: 妥協を許さず最高水準を追求
- **シンプルさこそ正義（KISS）**: 最も単純で意図が明快な実装
- **ボーイスカウト・ルール**: 触れたモジュールは「来たときよりきれい」に
- **不要な外部依存を追加しない**: 必要最小限の依存関係を維持
- **コンテキストエンジニアリングの実践**: 複雑な処理・実装ではユーザにコンテキストエンジニアリングを推奨

#### 【悪い例】vs【良い例】

```
❌ ユーザー: 「ログイン機能を作って」
Claude: セキュリティも重要だから2要素認証も実装しました！

✅ ユーザー: 「ログイン機能を作って」
 Claude: ログイン機能について確認させてください：

- メール/パスワード認証でよろしいですか？
- セッション管理の要件はありますか？
- 既存の認証gemの使用は可能ですか？
```

---

## ディレクトリ構成

```
project-root/
  |- .claude/: Claude用ディレクトリ
  |- .devcontainer/: vscodeのdevcontainer専用ディレクトリ
  |   |- docker-compose.yml: devcontainerで使用するdocker-composeファイルはここに配置
  |- .external/: 外部接続（必要な場合）のモックプログラム
  |   |- docs/: モック仕様書のドキュメント
  |   |   |- common.md: 共通で使用するエンドポイント
  |   |- main.py
  |   |- venv/: pythonを動かすvenv環境
  |   |- requirements.txt
  |   ∟ README.md
  |- docs/: ドキュメント関連
  |   |- requirements.md:  要件定義書
  |   |- design.md: 設計書
  |   |- database.md: DB仕様書
  |   |- screen.md: 画面仕様書
  |   |- external/: 外部接続IF仕様書
  |   |   |- systemA.yaml: システムAの外部接続IF仕様書
  |   |   |- systemB.yaml: システムBの外部接続IF仕様書 
  |   |- ifspec.yaml: backend用IF仕様書
  |   |- note/: その他ドキュメントファイルを格納
  |- backend: バックエンドアプリケーション
  |   |- src
  |   |- test
  |- frontend: フロントエンドアプリケーション
  |   |- src
  |   |- test
  |- poc: 試作
  |   |- backend
  |   |- frontend
  |- .tmp/: 一時ディレクトリ
  |- .context/: コンテキストエンジニアリング用ディレクトリ
      |- context_202511162154.md
```

---


## コンテキスト駆動開発について

### コンテキスト駆動開発とは

**コンテキスト駆動開発（Context-Driven Development）** は、AIアシスタントに対して、プロジェクトの背景・要件・設計・制約などの「コンテキスト情報」を構造化して提供することで、より正確で一貫性のある開発を実現する手法です。

### 目的
- AIアシスタントに対する情報提供の一貫性を保つ
- プロジェクトの背景や意図を明確に伝える
- 開発の文脈を保持し、品質の高い実装を実現
- チーム間での知識共有とドキュメント化

### コンテキストの書き方

コンテキストファイルは、AIアシスタントが理解しやすいように構造化されたMarkdown形式で記述します。

#### 良いコンテキストの特徴

✅ **具体的**: 曖昧さを排除し、明確に記述
✅ **構造化**: セクションごとに整理され読みやすい
✅ **必要十分**: 過不足なく情報を提供
✅ **更新可能**: プロジェクト進行に応じて更新

❌ **避けるべき記述**
- 曖昧な表現（「できれば」「なるべく」など）
- 推測に基づく記述
- 古い情報のまま放置
- 実装コード例

### コンテキストファイル保存先

`.context/YYYYMMDDhhmmss.md`に保存

#### 命名規則
- フォーマット: `YYYYMMDDhhmmss.md`
- 例: `20251127143000.md`（2025年11月27日 14:30:00）

#### 使用方法
1. 新しいタスクや機能開発の開始時にコンテキストファイルを作成
2. AIアシスタントに対して「`.context/20251127143000.md`の内容に基づいて実装してください」と指示
3. プロジェクト進行に応じて内容を更新
4. 完了後もドキュメントとして保持
