---
agent: 'agent'
description: '画面設計ドキュメントを生成'
---

# 画面一覧・画面遷移図の作成

## 目的

要件定義書・設計書から画面情報を抽出し、以下の成果物を作成する：
- **CLAUDE.md**: 画面一覧サマリ（クイックリファレンス用）
- **docs/screen.md**: 画面詳細仕様・画面遷移図（詳細設計用）

---

## 前提条件

以下のいずれかが存在すること：
- `docs/requirements.md`（要件定義書）
- `docs/design.md`（設計書）
- ユーザから提供される画面要件

---

## Task
1. 入力資料の読み込み
2. 画面一覧の抽出・確認（ユーザ承認）
3. 画面構成詳細の作成
4. 画面遷移図の作成

---

## Step 1: 入力資料の読み込み

### 実行内容

1. 以下のファイルを順に確認し、存在するものを読み込む：
   - `docs/requirements.md`
   - `docs/design.md`
   - `CLAUDE.md`（既存の画面情報があれば参照）

2. 読み込んだ内容から以下を抽出：
   - 必要な画面の種類
   - 各画面の目的・機能
   - 画面間の遷移関係

### 出力

抽出した情報をユーザに報告し、Step 2へ進む。

---

## Step 2: 画面一覧の作成

### 実行内容

1. 抽出した情報から画面一覧を作成
2. **ユーザに確認を求める**（必須）
3. 承認後、`CLAUDE.md`の「画面一覧」セクションに追記

### 出力フォーマット（CLAUDE.md用）

```markdown
## 画面一覧

| 画面ID | 画面名 | 画面概要 |
|--------|--------|----------|
| SCR-01 | ログイン画面 | ユーザがログインを行う画面 |
| SCR-02 | ホーム画面 | メインメニューとダッシュボードを表示 |
| SCR-03 | 一覧画面 | データ一覧を表示・検索・操作する画面 |

※詳細は`docs/screen.md`を参照
```

### 画面ID命名規則

- `SCR-XX`: 通常画面（XX: 01から連番）
- `DLG-XX`: ダイアログ・モーダル
- `ERR-XX`: エラー画面

---

## Step 3: 画面構成詳細の作成

### 実行内容

各画面について、以下の情報を`docs/screen.md`に記載する。

### 出力フォーマット（docs/screen.md用）

```markdown
# 画面仕様書

## 1. 画面一覧

| 画面ID | 画面名 | 画面概要 |
|--------|--------|----------|
| SCR-01 | ログイン画面 | ユーザがログインを行う画面 |

---

## 2. 画面詳細

### SCR-01: ログイン画面

#### 概要
ユーザ認証を行う画面

#### UI構成要素

| 要素名 | 種別 | 必須 | 説明 |
|--------|------|------|------|
| ユーザ名 | テキスト入力 | ○ | メールアドレス形式 |
| パスワード | パスワード入力 | ○ | 8文字以上 |
| ログインボタン | ボタン | - | 認証処理を実行 |
| 新規登録リンク | リンク | - | SCR-02へ遷移 |

#### アクション定義

| アクション | トリガー | 処理内容 | 遷移先 |
|------------|----------|----------|--------|
| ログイン | ログインボタン押下 | 認証API呼び出し | 成功: SCR-03 / 失敗: エラー表示 |
| 新規登録 | 新規登録リンク押下 | - | SCR-02 |

---

### SCR-02: ユーザ登録画面

#### 概要
新規ユーザを登録する画面

#### UI構成要素

| 要素名 | 種別 | 必須 | 説明 |
|--------|------|------|------|
| メールアドレス | テキスト入力 | ○ | メール形式バリデーション |
| ユーザ名 | テキスト入力 | ○ | 3〜20文字 |
| パスワード | パスワード入力 | ○ | 8文字以上、英数字混合 |
| パスワード確認 | パスワード入力 | ○ | パスワードと一致確認 |
| 登録ボタン | ボタン | - | 登録処理を実行 |

#### アクション定義

| アクション | トリガー | 処理内容 | 遷移先 |
|------------|----------|----------|--------|
| 登録 | 登録ボタン押下 | ユーザ登録API呼び出し | 成功: SCR-01 / 失敗: エラー表示 |
| 戻る | 戻るリンク押下 | - | SCR-01 |
```

---

## Step 4: 画面遷移図の作成

### 実行内容

1. 全体遷移図を作成
2. 機能グループごとに分割した詳細遷移図を作成
3. `docs/screen.md`の末尾に追記

### 出力フォーマット

```markdown
---

## 3. 画面遷移図

### 3.1 全体遷移図

\```mermaid
graph TD
    subgraph 認証
        SCR-01[ログイン画面<br/>SCR-01]
        SCR-02[ユーザ登録画面<br/>SCR-02]
    end

    subgraph メイン機能
        SCR-03[ホーム画面<br/>SCR-03]
        SCR-04[一覧画面<br/>SCR-04]
        SCR-05[詳細画面<br/>SCR-05]
    end

    SCR-01 -->|ログイン成功| SCR-03
    SCR-01 -->|新規登録| SCR-02
    SCR-02 -->|登録完了| SCR-01
    SCR-03 -->|一覧へ| SCR-04
    SCR-04 -->|詳細表示| SCR-05
    SCR-05 -->|戻る| SCR-04
\```

### 3.2 認証フロー詳細

\```mermaid
graph TD
    SCR-01[ログイン画面<br/>SCR-01]
    SCR-02[ユーザ登録画面<br/>SCR-02]
    SCR-03[ホーム画面<br/>SCR-03]

    SCR-01 -->|ログインボタン押下<br/>認証成功| SCR-03
    SCR-01 -->|ログインボタン押下<br/>認証失敗| SCR-01
    SCR-01 -->|新規登録リンク押下| SCR-02
    SCR-02 -->|登録ボタン押下<br/>登録成功| SCR-01
    SCR-02 -->|戻るリンク押下| SCR-01
\```
```

### mermaid記法の注意点

- ノードIDは英数字のみ使用（日本語不可）
- 日本語はラベル内`[日本語<br/>ID]`で表示
- `subgraph`で機能グループを視覚的に分類
- 遷移条件は`-->|条件|`で記載

---

## 成果物チェックリスト

実行完了時に以下を確認：

- [ ] `CLAUDE.md`に画面一覧サマリが追記されている
- [ ] `docs/screen.md`に全画面の詳細仕様が記載されている
- [ ] `docs/screen.md`に画面遷移図（mermaid）が含まれている
- [ ] 画面IDが一貫した命名規則で付与されている
- [ ] 全ての画面間遷移が定義されている

